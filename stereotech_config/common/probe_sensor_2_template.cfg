[gcode_macro AUTO_WCS]
gcode:
    AUTO_WCS_OFFSET_V2

[gcode_macro AUTO_WCS_OFFSET_V2]
description: macro do move for measuring and calculated WCS. Sensor DAC_v_2
gcode:
    {% if printer["gcode_button five_axis_module"].state == "PRESSED" %}
        PROBE_TEMPLATE_POINT POINT=A_Z
        SET_POINT MACRO=SAVE_WCS_CALC_POINT POINT=0
        PROBE_TEMPLATE_POINT POINT=B_MY_C30
        SET_POINT MACRO=SAVE_WCS_CALC_POINT POINT=7
        PROBE_TEMPLATE_POINT POINT=B_Y_C30
        SET_POINT MACRO=SAVE_WCS_CALC_POINT POINT=1
        PROBE_TEMPLATE_POINT POINT=C_X
        SET_POINT MACRO=SAVE_WCS_CALC_POINT POINT=2
        PROBE_TEMPLATE_POINT POINT=D_MX
        SET_POINT MACRO=SAVE_WCS_CALC_POINT POINT=3
        PROBE_TEMPLATE_POINT POINT=A_Z_A90
        SET_POINT MACRO=SAVE_WCS_CALC_POINT POINT=4
        PROBE_TEMPLATE_POINT POINT=B_Y_A90_C60
        SET_POINT MACRO=SAVE_WCS_CALC_POINT POINT=5
        PROBE_TEMPLATE_POINT POINT=B_MY_A90_C60
        SET_POINT MACRO=SAVE_WCS_CALC_POINT POINT=6
        PROBE_TEMPLATE_POINT POINT=D_MX_A90
        SET_POINT MACRO=SAVE_WCS_CALC_POINT POINT=8
        PROBE_TEMPLATE_POINT POINT=C_X_A90
        SET_POINT MACRO=SAVE_WCS_CALC_POINT POINT=9
        {% set template_thickness = printer.save_variables.variables.template_thickness|default(10.0)|float %}
        {% set auto_wcs_adj = printer.save_variables.variables.auto_wcs_adj|default(0.3)|float %}
        CALC_WCS_PARAMS THICKNESS={ template_thickness } ADJUSTMENT={ auto_wcs_adj } SENSOR_VERSION=1
    {% endif %}

[gcode_macro MOVE_ACCURACY_SET_MODULE_FIVE_D]
Description: This macro do moved for accuracy set the module 5d.
gcode:
    G28 A
    M204 S500
    G0 C0.1
    G0 C0
    ADJUST_TEMPLATE_HEIGHT A=0
    ALIGN_C_AXIS
    PROBE_TEMPLATE_POINT POINT=C_Z
    SET_POINT MACRO=SAVE_SKEW_POINT POINT=0
    PROBE_TEMPLATE_POINT POINT=D_Z
    SET_POINT MACRO=SAVE_SKEW_POINT POINT=1
    PROBE_TEMPLATE_POINT POINT=C_Y_A90
    SET_POINT MACRO=SAVE_SKEW_POINT POINT=2
    PROBE_TEMPLATE_POINT POINT=D_Y_A90
    SET_POINT MACRO=SAVE_SKEW_POINT POINT=3
    CHECK_ACCURACY_SET_MODULE_FIVE_D
