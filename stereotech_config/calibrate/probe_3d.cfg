
[gcode_macro CALIBRATE_MODULE_THREE_D]
description: 3D module calibration
gcode:
    {% if printer["gcode_button five_axis_module"].state == "RELEASED" %}
        G0 X197 Y195 F6000
        G0 Z40 F3600
        PROBE
        G91
        G0 Z30 F3600
        G90
        MODULE_THREE_D_MESH_CALIBRATE
	    G91
        G0 Z30 F3600
        G90
	    G0 X150 Y50 F3600
    {% endif %}

[gcode_macro MODULE_THREE_D_MESH_CALIBRATE]
description: 3D module calibration
gcode:
    {% if printer["gcode_button five_axis_module"].state == "RELEASED" %}
        Z_OFFSET_APPLY_PROBE Z={printer.probe.last_result[2]}
        BED_MESH_CALIBRATE PROFILE=module_3d
        BED_MESH_CLEAR
    {% endif %}
