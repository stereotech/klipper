[wizard ADJUST_BASEMENT_AUTO]
image: wizards/5d_calibration_auto/adjust_basement_auto/adjust_basement_auto.jpg
type: 5d
steps: ADJUST_BASEMENT_AUTO0, ADJUST_BASEMENT_AUTO1, ADJUST_BASEMENT_AUTO2, ADJUST_BASEMENT_AUTO3, ADJUST_BASEMENT_AUTO4, ADJUST_BASEMENT_AUTO5, ADJUST_BASEMENT_AUTO6, ADJUST_BASEMENT_AUTO7
variable_mode: ''
variable_wcs: 0

[wizard_step ADJUST_BASEMENT_AUTO0]
image: wizards/adjust_basement_auto/adjust_basement_auto.jpg
landscape: false
description: This wizard helps you to setup zero point for proper 5D printing
warning: none
countdown: 0
info: none
action_gcode:
    SET_WIZARD_ENABLE WIZARD={wizard.name} ENABLE=1 ERROR=''
    MOVE_SERVICE_POSITION
    SET_WIZARD_STEP WIZARD={wizard.name} STEP=ADJUST_BASEMENT_AUTO1
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}

[wizard_step ADJUST_BASEMENT_AUTO1]
image: wizards/zero_point_setup/zero_point_setup04.jpg
landscape: false
description: Please place needed base in the 5D Module and press Next
warning: AdjustBasementAuto.MakeSureBaseProtrudes
countdown: 0
info: none
action_gcode:
    SET_WIZARD_STEP WIZARD={wizard.name} STEP=ADJUST_BASEMENT_AUTO2
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}

[wizard_step ADJUST_BASEMENT_AUTO2]
image: wizards/5d_calibration_auto/auto_five_axis_level_03.jpg
landscape: false
description: Connect probe and press Next
warning: AdjustBasementAuto.WarningScrew
countdown: 0
info: none
action_gcode:
    CHANGE_STEP_AND_WAIT_PROBE WIZARD={wizard.name} STEP=ADJUST_BASEMENT_AUTO3
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}

[wizard_step ADJUST_BASEMENT_AUTO3]
image: wizards/5d_calibration_auto/auto_five_axis_level_04.jpg
landscape: false
description: AdjustBasementAuto.ConnectAndCheck
warning: none
countdown: 0
info: none
placeholder: wizard-step-probe
action_gcode:
    SET_WIZARD_STEP WIZARD={wizard.name} STEP=ADJUST_BASEMENT_AUTO4
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}

[wizard_step_selector ADJUST_BASEMENT_AUTO4]
image: wizards/zero_point_setup/zero_point_setup.jpg
landscape: false
description: Please select Printing mode which you want to use
warning: none
countdown: 0
info: none
items: 5D_spiral, 5D_spiral_full
action_gcode:
    {% set mode = printer['wizard ' ~ wizard.name].variables.mode %}
    {% if mode == '5D_spiral' %}
        SET_WIZARD_VARIABLE WIZARD={wizard.name} VARIABLE=wcs VALUE=1
        AUTO_BASEMENT_WCS_MOVE WCS=1
        SET_WIZARD_STEP WIZARD={wizard.name} STEP=ADJUST_BASEMENT_AUTO5
    {% else %}
        SET_WIZARD_VARIABLE WIZARD={wizard.name} VARIABLE=wcs VALUE=0
        {% set cmd = 'AUTO_BASEMENT_WCS' %}
        CHANGE_STEP_AND_WAIT_RUN_CMD WIZARD={wizard.name} STEP=ADJUST_BASEMENT_AUTO6 CMD={cmd}
    {% endif %}
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}
select_gcode:
    SET_WIZARD_VARIABLE WIZARD={wizard.name} VARIABLE=mode VALUE={selected}

[wizard_step_jog ADJUST_BASEMENT_AUTO5]
image: wizards/adjust_basement_auto/move-sensor-to-center.jpg
landscape: false
description: AdjustBasementAuto.MoveSensorToCenter
warning: none
countdown: 0
info: none
axes: x, y, z
steps: 0.05, 0.1, 1, 10
default_step: 1
jog_gcode:
    JOG_DO_MOVE {rawparams} STEP_NAME={wizard.wizard_step_name}
action_gcode:
    {% set wcs = printer['wizard ' ~ wizard.name].variables.wcs %}
    {% set cmd = 'AUTO_BASEMENT_WCS WCS=' ~ wcs %}
    CHANGE_STEP_AND_WAIT_RUN_CMD WIZARD={wizard.name} STEP=ADJUST_BASEMENT_AUTO6 CMD={cmd}
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}

[wizard_step ADJUST_BASEMENT_AUTO6]
image: wizards/5d_calibration_auto/auto_five_axis_level_03.jpg
landscape: false
description: AdjustBasementAuto.Disable
warning: none
countdown: 0
info: none
placeholder: waitProgress true
action_gcode:
    {% set wcs = printer['wizard ' ~ wizard.name].variables.wcs %}
    ADJUST_BASEMENT_WCS WCS={wcs}
    SET_WIZARD_STEP WIZARD={wizard.name} STEP=ADJUST_BASEMENT_AUTO7
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}

[wizard_step ADJUST_BASEMENT_AUTO7]
image: wizards/adjust_basement_auto/adjust_basement_auto.jpg
landscape: false
description: Adjust basement completed
warning: none
countdown: 0
info: none
action_gcode:
    RESET_WIZARD WIZARD={wizard.name} ABORT=0
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}
