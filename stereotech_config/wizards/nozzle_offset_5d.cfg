[wizard NOZZLE_OFFSET_5D]
image: wizards/change_material/change_material.jpg
type: 5d
steps: NOZZLE_OFFSET_5D0, CLEAR_NOZZLE0, CLEAR_NOZZLE1, NOZZLE_OFFSET_5D1, NOZZLE_OFFSET_5D2, NOZZLE_OFFSET_5D3, NOZZLE_OFFSET_5D4, NOZZLE_OFFSET_5D5
variable_continue_from_step: ''

[wizard_step_button NOZZLE_OFFSET_5D0]
image: none
landscape: false
description: NozzleOffset5D.Description
warning: NozzleOffset5D.MakeSureFreeOfPlastic
countdown: 0
info: none
action_gcode:
    {% set next_step = wizard.name ~ (wizard.wizard_step_name[-1]|int + 1) %}
    SET_WIZARD_ENABLE WIZARD={wizard.name} ENABLE=1
    MOVE_SERVICE_POSITION
    SET_WIZARD_STEP WIZARD={wizard.name} STEP={next_step}
button_clear_noozle_gcode:
    {% set extruder = printer.toolhead.extruder|default('extruder') %}
    SET_WIZARD_ENABLE WIZARD={wizard.name} ENABLE=1 ERROR=''
    MOVE_SERVICE_POSITION_HEAD
    SET_WIZARD_VARIABLE WIZARD={wizard.name} VARIABLE=continue_from_step VALUE=NOZZLE_OFFSET_5D1
    CHANGE_STEP_AND_WAIT_HEATING WIZARD={wizard.name} STEP=CLEAR_NOZZLE0 TEMP=200 EXTRUDER={extruder}
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}

[wizard_step NOZZLE_OFFSET_5D1]
image: wizards/5d_calibration_auto/auto_five_axis_level_02.jpg
landscape: false
description: Place the calibration tool into the five axis module and press Next
warning: NozzleOffset5D.GapBetweenTemplateModule
countdown: 0
info: none
action_gcode:
    {% set next_step = wizard.name ~ (wizard.wizard_step_name[-1]|int + 1) %}
    SET_WIZARD_STEP WIZARD={wizard.name} STEP={next_step}
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}

[wizard_step NOZZLE_OFFSET_5D2]
image: wizards/5d_calibration_auto/auto_five_axis_level_03.jpg
description: Connect probe and press Next
landscape: false
warning: NozzleOffset5D.WarningScrew
countdown: 0
info: none
action_gcode:
    {% set next_step = wizard.name ~ (wizard.wizard_step_name[-1]|int + 1) %}
    CHANGE_STEP_AND_WAIT_PROBE WIZARD={wizard.name} STEP={next_step}
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}

[wizard_step NOZZLE_OFFSET_5D3]
image: wizards/5d_calibration_auto/auto_five_axis_level_04.jpg
landscape: false
description: NozzleOffset5D.ConnectAndCheck
warning: none
countdown: 0
info: none
placeholder: wizard-step-probe
action_gcode:
    {% set next_step = wizard.name ~ (wizard.wizard_step_name[-1]|int + 1) %}
    ADJUST_NOZZLE_OFFSET_Z
    SET_WIZARD_STEP WIZARD={wizard.name} STEP={next_step}
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}

[wizard_step_jog NOZZLE_OFFSET_5D4]
image: wizards/nozzle_offset/chup_3d.jpg
description: NozzleOffset5D.MoveToSurface
landscape: false
warning: none
countdown: 0
axes: z
steps: 0.05, 0.1, 1, 10
default_step: 1
jog_gcode:
    JOG_DO_MOVE {rawparams} STEP_NAME={wizard.wizard_step_name} MODE='5d'
action_gcode:
    {% set next_step = wizard.name ~ (wizard.wizard_step_name[-1]|int + 1) %}
    ADJUST_PROBE_OFFSET_Z ADJUST_CALIBRATION=1 ADJUST_WCS=1
    SET_WCS_FROM_AUTO_WCS
    SET_WIZARD_STEP WIZARD={wizard.name} STEP={next_step}
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}

[wizard_step NOZZLE_OFFSET_5D5]
image: wizards/5d_calibration_auto/auto_five_axis_level_03.jpg
landscape: false
description: NozzleOffset5D.Finish
warning: none
countdown: 0
info: none
action_gcode:
    RESET_WIZARD WIZARD={wizard.name} ABORT=0
cancel_gcode:
    RESET_WIZARD WIZARD={wizard.name}
