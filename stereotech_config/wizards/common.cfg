[gcode_macro CHANGE_STEP_AND_WAIT_HEATING]
gcode:
    {% set wizard = params.WIZARD %}
    {% set step = params.STEP %}
    {% set temperature = params.TEMP %}
    {% set selected_e = params.EXTRUDER %}
    SET_HEATER_TEMPERATURE HEATER={selected_e} TARGET={temperature}
    WIZARD_STEP_LOADING_STATE WIZARD={wizard} STEP={step} ENABLE=1
    SET_WIZARD_STEP WIZARD={wizard} STEP={step}
    M109 S{temperature}
    WIZARD_STEP_LOADING_STATE WIZARD={wizard} STEP={step} ENABLE=0

[gcode_macro RESET_WIZARD]
rename_existing: RESET_WIZARD_OLD
gcode:
    {% set wizard = params.WIZARD %}
    TURN_OFF_HEATERS
    RESET_WIZARD_OLD WIZARD={wizard}
