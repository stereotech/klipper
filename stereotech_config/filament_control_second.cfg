[filament_motion_sensor extruder1_sensor]
extruder: extruder1
detection_length: 10.5
event_delay: 60.0
switch_pin: PG15
pause_on_runout: False
runout_gcode:
    {% if printer.virtual_sdcard.is_active %}
        M117 trigered_filament_sensor1
        {action_respond_info('The filament has run out or there is a problem with its supply at the Extruder2.')}
        PAUSE TURN_OFF_EXTRUDERS=0 E=0
        M400
        SET_STATE_TRY_EXTRUDE_FILAMENT SENSOR='extruder1_sensor' ENABLE=1
        UPDATE_STATE_FILAMENT_RUNOUT_POSITION SENSOR='extruder1_sensor'
        G4 P1000
        TRY_DO_EXTRUDE SENSOR='extruder1_sensor'
        SET_STATE_TRY_EXTRUDE_FILAMENT SENSOR='extruder1_sensor' ENABLE=0
        CHECK_FILAMENT_MOTION_SENSOR SENSOR='extruder1_sensor'
    {% else %}
        FILAMENT_ERROR EXTRUDER=extruder1
    {% endif %}
